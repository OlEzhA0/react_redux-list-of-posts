{"version":3,"sources":["store/loading.ts","store/posts.ts","store/loaded.ts","store/query.ts","store/index.ts","components/SpinnerLoad.tsx","helpers/api.ts","components/DownloadButton.tsx","components/PostsList.tsx","helpers/filterPosts.ts","components/Input.tsx","helpers/debounce.js","App.tsx","index.tsx"],"names":["setLoading","status","type","loadingReducer","state","action","postReducer","posts","map","post","comments","filter","comm","id","commId","postId","loadedReducer","queryReducer","query","rootReducer","combineReducers","loading","loaded","isLoading","getPosts","isLoaded","queryValue","store","createStore","SpinnerLoad","className","getData","url","a","fetch","getInfo","infoToJson","json","preparedDatas","Promise","all","users","preparedPosts","user","find","ownerPost","userId","postsComments","comment","DownloadButton","useSelector","onClick","disabled","PostsList","dispatch","useDispatch","visiblePosts","useMemo","title","toLocaleLowerCase","body","replace","includes","filterPosts","key","name","email","SearchInput","debounceWrapper","f","delay","timerId","clearTimeout","arg","setTimeout","debounce","value","placeholder","onChange","e","target","App","then","data","finally","Root","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.179c0361.chunk.js","sourcesContent":["import { AnyAction } from 'redux';\n\nconst LOADING = 'LOADING';\n\nexport const setLoading = (status: boolean) => ({ type: LOADING, status });\n\nconst loadingReducer = (state = false, action: AnyAction) => {\n  switch (action.type) {\n    case LOADING:\n      return action.status;\n\n    default:\n      return state;\n  }\n};\n\nexport default loadingReducer;\n","import { AnyAction } from 'redux';\n\nconst SET_POSTS = 'SET_POSTS';\nconst DELETE_COMM = 'DELETE_COMM';\nconst DELETE_POST = 'DELETE_POST';\n\nexport const setPostsData = (posts: Post[]) => ({ type: SET_POSTS, posts });\nexport const deleteComm = (commId: number) => ({ type: DELETE_COMM, commId });\nexport const deletePost = (postId: number) => ({ type: DELETE_POST, postId });\n\nconst postReducer = (state = [] as Post[], action: AnyAction) => {\n  switch (action.type) {\n    case SET_POSTS:\n      return action.posts;\n\n    case DELETE_COMM:\n      return state.map(post => ({\n        ...post,\n        comments: post.comments.filter(comm => comm.id !== action.commId),\n      }));\n\n    case DELETE_POST:\n      return state.filter(post => post.id !== action.postId);\n\n    default:\n      return state;\n  }\n};\n\nexport default postReducer;\n","import { AnyAction } from 'redux';\n\nconst LOADED = 'LOADED';\n\nexport const setLoaded = () => ({ type: LOADED });\n\nconst loadedReducer = (state = false, action: AnyAction) => {\n  switch (action.type) {\n    case LOADED:\n      return true;\n\n    default:\n      return state;\n  }\n};\n\nexport default loadedReducer;\n","import { AnyAction } from 'redux';\n\nconst QUERY = 'QUERY';\n\nexport const setQuery = (query: string) => ({ type: QUERY, query });\n\nconst queryReducer = (state = '', action: AnyAction) => {\n  switch (action.type) {\n    case QUERY:\n      return action.query;\n\n    default:\n      return state;\n  }\n};\n\nexport default queryReducer;\n","import { createStore, combineReducers } from 'redux';\nimport loadingReducer from './loading';\nimport postReducer from './posts';\nimport loadedReducer from './loaded';\nimport queryReducer from './query';\n\nconst rootReducer = combineReducers({\n  loading: loadingReducer,\n  posts: postReducer,\n  loaded: loadedReducer,\n  query: queryReducer,\n});\n\nexport type RootState = ReturnType<typeof rootReducer>;\n\nexport const isLoading = (state: RootState) => state.loading;\nexport const getPosts = (state: RootState) => state.posts;\nexport const isLoaded = (state: RootState) => state.loaded;\nexport const queryValue = (state: RootState) => state.query;\n\nconst store = createStore(\n  rootReducer,\n);\n\nexport default store;\n","import React from 'react';\n\nexport const SpinnerLoad = () => {\n  return (\n    <div className=\"Spinner__Container\">\n      <div className=\"lds-ellipsis\">\n        <div />\n        <div />\n        <div />\n        <div />\n      </div>\n    </div>\n  );\n};\n","const GENERAL_LINK = 'https://mate-academy.github.io/react_dynamic-list-of-posts/api/';\n\nconst getData = async (url: string) => {\n  const getInfo = await fetch(`${GENERAL_LINK}${url}.json`);\n  const infoToJson = getInfo.json();\n\n  return infoToJson;\n};\n\nexport const preparedDatas = async () => {\n  const [posts, users, comments] = await Promise.all([\n    getData('posts'),\n    getData('users'),\n    getData('comments'),\n  ]);\n\n  const preparedPosts = posts.map((post: Post) => {\n    const user = users.find((ownerPost: User) => ownerPost.id === post.userId);\n    const postsComments = comments.filter((comment: Comments) => comment.postId === post.id);\n\n    return {\n      ...post,\n      user,\n      comments: postsComments,\n    };\n  });\n\n  return preparedPosts;\n};\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { isLoading } from '../store';\n\ninterface Props {\n  getData: () => void;\n}\n\nexport const DownloadButton: React.FC<Props> = ({ getData }) => {\n  const loading = useSelector(isLoading);\n\n  return (\n    <>\n      <button\n        type=\"button\"\n        onClick={getData}\n        disabled={loading}\n        className=\"loading-button\"\n      >\n        Get posts\n      </button>\n    </>\n  );\n};\n","import React, { useMemo } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getPosts, queryValue } from '../store';\nimport { deleteComm, deletePost } from '../store/posts';\nimport { filterPosts } from '../helpers/filterPosts';\n\nexport const PostsList: React.FC = () => {\n  const posts: Post[] = useSelector(getPosts);\n  const dispatch = useDispatch();\n  const query = useSelector(queryValue);\n\n  const visiblePosts: Post[] = useMemo(\n    () => filterPosts(posts, query),\n    [posts, query],\n  );\n\n  return (\n    <>\n      {visiblePosts.map(post => (\n        <div className=\"post\" key={post.id}>\n          <button\n            type=\"button\"\n            className=\"delete__post\"\n            onClick={() => dispatch(deletePost(post.id))}\n          >\n            delete post\n          </button>\n          <p className=\"post__title\">\n            <span className=\"post__id\">\n              {post.id}\n              .\n            </span>\n            {post.title}\n          </p>\n          <p className=\"post__body\">\n            {post.body}\n          </p>\n          {post.comments.map(comment => (\n            <div className=\"post__comm\" key={comment.id}>\n              <div className=\"comm\">\n                <p className=\"comm__name\">\n                  {comment.name}\n                </p>\n                <p className=\"comm__email\">\n                  {comment.email}\n                </p>\n                <p className=\"comm__body\">\n                  {comment.body}\n                </p>\n                <button\n                  className=\"delete__comm\"\n                  type=\"button\"\n                  onClick={() => dispatch(deleteComm(comment.id))}\n                >\n                  delete\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      ))}\n    </>\n  );\n};\n","export const filterPosts = (posts: Post[], query: string) => {\n  if (!query) {\n    return posts;\n  }\n\n  return posts\n    .filter(post => (\n      post.title.toLocaleLowerCase() + post.body.toLocaleLowerCase\n    )\n      .replace(/s*/g, ' ')\n      .includes(query.toLocaleLowerCase().replace(/s*/g, ' ')));\n};\n","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { setQuery } from '../store/query';\nimport { debounce } from '../helpers/debounce';\n\nexport const SearchInput: React.FC = () => {\n  const dispatch = useDispatch();\n\n  const debounceWrapper = debounce(\n    (value: string) => dispatch(setQuery(value)),\n    1000,\n  );\n\n  const startDebounce = (e: React.ChangeEvent<HTMLInputElement>) => {\n    debounceWrapper(e.target.value);\n  };\n\n  return (\n    <div className=\"inputContainer\">\n      <input\n        type=\"text\"\n        className=\"input\"\n        placeholder=\"write a text for search\"\n        onChange={startDebounce}\n      />\n    </div>\n  );\n};\n","export const debounce = (f, delay) => {\n  let timerId;\n\n  return (...arg) => {\n    clearTimeout(timerId);\n    timerId = setTimeout(f, delay, ...arg)\n  }\n}\n","import React from 'react';\n\nimport './App.scss';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { isLoading, isLoaded } from './store';\nimport { SpinnerLoad } from './components/SpinnerLoad';\nimport { setLoading } from './store/loading';\nimport { preparedDatas } from './helpers/api';\nimport { setPostsData } from './store/posts';\nimport { setLoaded } from './store/loaded';\nimport { DownloadButton } from './components/DownloadButton';\nimport { PostsList } from './components/PostsList';\nimport { SearchInput } from './components/Input';\n\nconst App = () => {\n  const loading = useSelector(isLoading);\n  const loaded = useSelector(isLoaded);\n  const dispatch = useDispatch();\n\n  const getPostsData = () => {\n    dispatch(setLoading(true));\n\n    preparedDatas()\n      .then(data => {\n        dispatch(setPostsData(data));\n        dispatch(setLoaded());\n      })\n      .finally(() => dispatch(setLoading(false)));\n  };\n\n  return (\n    <div className=\"App\">\n      <h1 className=\"title\">Redux list of posts</h1>\n      {!loaded && (\n        <DownloadButton\n          getData={getPostsData}\n        />\n      )}\n      {loading && <SpinnerLoad />}\n      {loaded && (\n        <>\n          <SearchInput />\n          <PostsList />\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\nimport 'bulma/css/bulma.css';\n\nimport App from './App';\nimport store from './store';\n\nconst Root = () => (\n  <Provider store={store}>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </Provider>\n);\n\nReactDOM.render(<Root />, document.getElementById('root'));\n"],"sourceRoot":""}